{% extends 'blog/base.html' %}
{% load blog_tags %}

{% block title %}
  My Blog
{% endblock %}

{% block content %}
  <h1>My Blog</h1>
  {% if tag %}
    <h2>Posts tagged with "{{ tag.name }}"</h2>
  {% endif %}
  {% for post in posts %}
    <div class="card mb-3">
      <div class="card-body">
        <h2 class="card-title"><a href="{{ post.get_absolute_url }}">{{ post.title }}</a></h2>
        <p class="card-subtitle">Published {{ post.publish }} by {{ post.author }}</p>
        <div class="tags">
          Tags:{% for tag in post.tags.all %}
            <span class="badge rounded-pill text-bg-primary"><a href="{% url 'blog:post_list_by_tag' tag.slug %}">{{ tag.name }}</a></span>
          {% endfor %}
        </div>
        <div class="card-text">{{ post.body|markdown|truncatewords_html:30 }}</div>
      </div>
    </div>
  {% endfor %}
  {% include 'pagination.html' with page=posts %}
{% endblock %}
